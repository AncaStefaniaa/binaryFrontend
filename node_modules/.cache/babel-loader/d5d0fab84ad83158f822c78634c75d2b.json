{"ast":null,"code":"import _regeneratorRuntime from\"/home/andrei/itfest2019/ionic-react-conference-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/andrei/itfest2019/ionic-react-conference-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/andrei/itfest2019/ionic-react-conference-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{IonHeader,IonToolbar,IonTitle,IonContent,IonPage,IonButtons,IonMenuButton,IonRow,IonCol,IonButton,IonList,IonItem,IonLabel,IonInput,IonText}from'@ionic/react';import'./Login.scss';import{setIsLoggedIn,setUsername}from'../data/user/user.actions';import{connect}from'../data/connect';var Login=function Login(_ref){var setIsLoggedIn=_ref.setIsLoggedIn,history=_ref.history,setUsernameAction=_ref.setUsername;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),formSubmitted=_useState6[0],setFormSubmitted=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),usernameError=_useState8[0],setUsernameError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),passwordError=_useState10[0],setPasswordError=_useState10[1];var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setFormSubmitted(true);if(!username){setUsernameError(true);}if(!password){setPasswordError(true);}if(!(username&&password)){_context.next=10;break;}_context.next=7;return setIsLoggedIn(true);case 7:_context.next=9;return setUsernameAction(username);case 9:history.push('/tabs/schedule',{direction:'none'});case 10:case\"end\":return _context.stop();}}},_callee);}));return function login(_x){return _ref2.apply(this,arguments);};}();return React.createElement(IonPage,{id:\"login-page\"},React.createElement(IonHeader,null,React.createElement(IonToolbar,null,React.createElement(IonButtons,{slot:\"start\"},React.createElement(IonMenuButton,null)),React.createElement(IonTitle,null,\"Login\"))),React.createElement(IonContent,null,React.createElement(\"div\",{className:\"login-logo\"},React.createElement(\"img\",{src:\"assets/img/appicon.svg\",alt:\"Ionic logo\"})),React.createElement(\"form\",{noValidate:true,onSubmit:login},React.createElement(IonList,null,React.createElement(IonItem,null,React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Username\"),React.createElement(IonInput,{name:\"username\",type:\"text\",value:username,spellCheck:false,autocapitalize:\"off\",onIonChange:function onIonChange(e){return setUsername(e.detail.value);},required:true})),formSubmitted&&usernameError&&React.createElement(IonText,{color:\"danger\"},React.createElement(\"p\",{className:\"ion-padding-start\"},\"Username is required\")),React.createElement(IonItem,null,React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Password\"),React.createElement(IonInput,{name:\"password\",type:\"password\",value:password,onIonChange:function onIonChange(e){return setPassword(e.detail.value);}})),formSubmitted&&passwordError&&React.createElement(IonText,{color:\"danger\"},React.createElement(\"p\",{className:\"ion-padding-start\"},\"Password is required\"))),React.createElement(IonRow,null,React.createElement(IonCol,null,React.createElement(IonButton,{type:\"submit\",expand:\"block\"},\"Login\")),React.createElement(IonCol,null,React.createElement(IonButton,{routerLink:\"/signup\",color:\"light\",expand:\"block\"},\"Signup\"))))));};export default connect({mapDispatchToProps:{setIsLoggedIn:setIsLoggedIn,setUsername:setUsername},component:Login});","map":{"version":3,"sources":["/home/andrei/itfest2019/ionic-react-conference-app/src/pages/Login.tsx"],"names":["React","useState","IonHeader","IonToolbar","IonTitle","IonContent","IonPage","IonButtons","IonMenuButton","IonRow","IonCol","IonButton","IonList","IonItem","IonLabel","IonInput","IonText","setIsLoggedIn","setUsername","connect","Login","history","setUsernameAction","username","password","setPassword","formSubmitted","setFormSubmitted","usernameError","setUsernameError","passwordError","setPasswordError","login","e","preventDefault","push","direction","detail","value","mapDispatchToProps","component"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { IonHeader, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton, IonRow, IonCol, IonButton, IonList, IonItem, IonLabel, IonInput, IonText } from '@ionic/react';\nimport './Login.scss';\nimport { setIsLoggedIn, setUsername } from '../data/user/user.actions';\nimport { connect } from '../data/connect';\nimport { RouteComponentProps } from 'react-router';\n\ninterface OwnProps extends RouteComponentProps {}\n\ninterface DispatchProps {\n  setIsLoggedIn: typeof setIsLoggedIn;\n  setUsername: typeof setUsername;\n}\n\ninterface LoginProps extends OwnProps,  DispatchProps { }\n\nconst Login: React.FC<LoginProps> = ({setIsLoggedIn, history, setUsername: setUsernameAction}) => {\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [formSubmitted, setFormSubmitted] = useState(false);\n  const [usernameError, setUsernameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n\n  const login = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setFormSubmitted(true);\n    if(!username) {\n      setUsernameError(true);\n    }\n    if(!password) {\n      setPasswordError(true);\n    }\n\n    if(username && password) {\n      await setIsLoggedIn(true);\n      await setUsernameAction(username);\n      history.push('/tabs/schedule', {direction: 'none'});\n    }\n  };\n\n  return (\n    <IonPage id=\"login-page\">\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton></IonMenuButton>\n          </IonButtons>\n          <IonTitle>Login</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n\n        <div className=\"login-logo\">\n          <img src=\"assets/img/appicon.svg\" alt=\"Ionic logo\" />\n        </div>\n\n        <form noValidate onSubmit={login}>\n          <IonList>\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Username</IonLabel>\n              <IonInput name=\"username\" type=\"text\" value={username} spellCheck={false} autocapitalize=\"off\" onIonChange={e => setUsername(e.detail.value!)}\n                required>\n              </IonInput>\n            </IonItem>\n\n            {formSubmitted && usernameError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Username is required\n              </p>\n            </IonText>}\n\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Password</IonLabel>\n              <IonInput name=\"password\" type=\"password\" value={password} onIonChange={e => setPassword(e.detail.value!)}>\n              </IonInput>\n            </IonItem>\n\n            {formSubmitted && passwordError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Password is required\n              </p>\n            </IonText>}\n          </IonList>\n\n          <IonRow>\n            <IonCol>\n              <IonButton type=\"submit\" expand=\"block\">Login</IonButton>\n            </IonCol>\n            <IonCol>\n              <IonButton routerLink=\"/signup\" color=\"light\" expand=\"block\">Signup</IonButton>\n            </IonCol>\n          </IonRow>\n        </form>\n\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default connect<OwnProps, {}, DispatchProps>({\n  mapDispatchToProps: {\n    setIsLoggedIn,\n    setUsername\n  },\n  component: Login\n})"]},"metadata":{},"sourceType":"module"}