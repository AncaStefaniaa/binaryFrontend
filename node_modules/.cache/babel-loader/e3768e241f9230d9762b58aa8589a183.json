{"ast":null,"code":"import _regeneratorRuntime from\"/home/andrei/itfest2019/ionic-react-conference-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/andrei/itfest2019/ionic-react-conference-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/andrei/itfest2019/ionic-react-conference-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Plugins}from'@capacitor/core';var Storage=Plugins.Storage;var locationsUrl='/assets/data/locations.json';var sessionsUrl='/assets/data/sessions.json';var speakersUrl='/assets/data/speakers.json';var HAS_LOGGED_IN='hasLoggedIn';var HAS_SEEN_TUTORIAL='hasSeenTutorial';var USERNAME='username';export var getConfData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,sessions,locations,speakers,allTracks,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([fetch(sessionsUrl),fetch(locationsUrl),fetch(speakersUrl)]);case 2:response=_context.sent;_context.next=5;return response[0].json();case 5:sessions=_context.sent;_context.next=8;return response[1].json();case 8:locations=_context.sent;_context.next=11;return response[2].json();case 11:speakers=_context.sent;allTracks=sessions.reduce(function(all,session){return all.concat(session.tracks);},[]).filter(function(trackName,index,array){return array.indexOf(trackName)===index;}).sort();data={sessions:sessions,locations:locations,speakers:speakers,allTracks:allTracks,filteredTracks:_toConsumableArray(allTracks)};return _context.abrupt(\"return\",data);case 15:case\"end\":return _context.stop();}}},_callee);}));return function getConfData(){return _ref.apply(this,arguments);};}();export var getUserData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,isLoggedin,hasSeenTutorial,username,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all([Storage.get({key:HAS_LOGGED_IN}),Storage.get({key:HAS_SEEN_TUTORIAL}),Storage.get({key:USERNAME})]);case 2:response=_context2.sent;_context2.next=5;return response[0].value;case 5:_context2.t0=_context2.sent;isLoggedin=_context2.t0==='true';_context2.next=9;return response[1].value;case 9:_context2.t1=_context2.sent;hasSeenTutorial=_context2.t1==='true';_context2.next=13;return response[2].value;case 13:_context2.t2=_context2.sent;if(_context2.t2){_context2.next=16;break;}_context2.t2=undefined;case 16:username=_context2.t2;data={isLoggedin:isLoggedin,hasSeenTutorial:hasSeenTutorial,username:username};return _context2.abrupt(\"return\",data);case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function getUserData(){return _ref2.apply(this,arguments);};}();export var setIsLoggedInData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(isLoggedIn){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Storage.set({key:HAS_LOGGED_IN,value:JSON.stringify(isLoggedIn)});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function setIsLoggedInData(_x){return _ref3.apply(this,arguments);};}();export var setHasSeenTutorialData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(hasSeenTutorial){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Storage.set({key:HAS_SEEN_TUTORIAL,value:JSON.stringify(hasSeenTutorial)});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function setHasSeenTutorialData(_x2){return _ref4.apply(this,arguments);};}();export var setUsernameData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(username){_context5.next=5;break;}_context5.next=3;return Storage.remove({key:USERNAME});case 3:_context5.next=7;break;case 5:_context5.next=7;return Storage.set({key:USERNAME,value:username});case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function setUsernameData(_x3){return _ref5.apply(this,arguments);};}();","map":{"version":3,"sources":["/home/andrei/itfest2019/ionic-react-conference-app/src/data/dataApi.ts"],"names":["Plugins","Storage","locationsUrl","sessionsUrl","speakersUrl","HAS_LOGGED_IN","HAS_SEEN_TUTORIAL","USERNAME","getConfData","Promise","all","fetch","response","json","sessions","locations","speakers","allTracks","reduce","session","concat","tracks","filter","trackName","index","array","indexOf","sort","data","filteredTracks","getUserData","get","key","value","isLoggedin","hasSeenTutorial","undefined","username","setIsLoggedInData","isLoggedIn","set","JSON","stringify","setHasSeenTutorialData","setUsernameData","remove"],"mappings":"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","sourcesContent":["import { Plugins } from '@capacitor/core';\nimport { Session } from '../models/Session';\nimport { Speaker } from '../models/Speaker';\nimport { Location } from '../models/Location';\n\nconst { Storage } = Plugins;\n\nconst locationsUrl = '/assets/data/locations.json';\nconst sessionsUrl = '/assets/data/sessions.json';\nconst speakersUrl = '/assets/data/speakers.json';\n\nconst HAS_LOGGED_IN = 'hasLoggedIn';\nconst HAS_SEEN_TUTORIAL = 'hasSeenTutorial';\nconst USERNAME = 'username';\n\nexport const getConfData = async () => {\n  const response = await Promise.all([\n    fetch(sessionsUrl),\n    fetch(locationsUrl),\n    fetch(speakersUrl)]);\n  const sessions = await response[0].json() as Session[];\n  const locations = await response[1].json() as Location[];\n  const speakers = await response[2].json() as Speaker[];\n  const allTracks = sessions\n    .reduce((all, session) => all.concat(session.tracks), [] as string[])\n    .filter((trackName, index, array) => array.indexOf(trackName) === index)\n    .sort();\n  const data = {\n    sessions,\n    locations,\n    speakers,\n    allTracks,\n    filteredTracks: [...allTracks]\n  }\n  return data;\n}\n\nexport const getUserData = async () => {\n  const response = await Promise.all([\n    Storage.get({ key: HAS_LOGGED_IN }),\n    Storage.get({ key: HAS_SEEN_TUTORIAL }),\n    Storage.get({ key: USERNAME })]);\n  const isLoggedin = await response[0].value === 'true';\n  const hasSeenTutorial = await response[1].value === 'true';\n  const username = await response[2].value || undefined;\n  const data = {\n    isLoggedin,\n    hasSeenTutorial,\n    username\n  }\n  return data;\n}\n\nexport const setIsLoggedInData = async (isLoggedIn: boolean) => {\n  await Storage.set({ key: HAS_LOGGED_IN, value: JSON.stringify(isLoggedIn) });\n}\n\nexport const setHasSeenTutorialData = async (hasSeenTutorial: boolean) => {\n  await Storage.set({ key: HAS_SEEN_TUTORIAL, value: JSON.stringify(hasSeenTutorial) });\n}\n\nexport const setUsernameData = async (username?: string) => {\n  if (!username) {\n    await Storage.remove({ key: USERNAME });\n  } else {\n    await Storage.set({ key: USERNAME, value: username });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}